# Программирование

* [Создание приложения](#Создание-приложения)
* [Стили, иконки, логотипы](#Стили-иконки-логотипы)
* Список услуг/товаров
    - Режим администратора
    - Макет "плиткой"
    - Изображения
    - Сортировка (своя)
    - Фильтры
    - Поиск (по нескольким полям)
    - Количество отображаемых/всего записей
    - Удаление (с проверкой продаж)
* Добавление/редактирование 
    - проверка на дубль по названию
* Дополнительные фото (CRUD)
* Запись на услугу / продажа
* Ближайшие записи (окно)
    - выделение цветом по времени
    - автообновление 

## Создание приложения

Тип приложения: **WPF, .NET Framefork**

**Внимание!** По **заданию** название приложения (т.е. проекта) должно совпадать с названием огранизации. Русскими буквами, конечно, писать не нужно. Пишите латиницей либо русскую транскрипцию либо по-английски. Например: DoeduSam, SchoolGreatBritain...

>Нигде в задании не нашел как называется компания, пусть будет *AutoService*

В *WPF* подразумевается использование фрейма (*Frame*) с навигацией по страницам (*Page*) и если вы будете использовать этот механизм, то получите сколько то баллов, но можно не мудрить и прямо на главном окне показывать **DataGrid** с основной таблицей (в нашем задании это услуги). А дополнительные таблицы открывать в новых окнах.

Для начала разметка должна быть примерно такой:

```xml
        ...
        Title="Услуги авто сервиса" 
        MinHeight="300" MinWidth="300"
        Height="450" Width="800">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="150"/>
            <ColumnDefinition Width="1*"/>
        </Grid.ColumnDefinitions>

        <StackPanel 
            Orientation="Vertical"
            Margin="5"
            VerticalAlignment="Bottom">
            <Button 
                x:Name="ExitButton"
                Content="Выход"
                Click="ExitButton_Click"/>
        </StackPanel>
    </Grid>
</Window>
```

Сразу задали название окна, разбили *Grid* на две колонки, задали минимальный размер окна (минимальная ширина больше левой колонки, остальное пока не важно)

В компоненте *StackPanel* я задал границу (*Margin*), чтобы кнопки не прилипали к границам грида.

![](../img/demo59.png)

## Стили, иконка, логотип

### Фирменный стиль (цвет и шрифт)

В заданиях WorldSkills и в Демо-экзамене в частности есть требование о соблюдении фирменного стиля. 

Для создания стиля нужно открыть разметку приложения (*App.xaml*)

И в тег `<Application.Resources>` добавить стили, например:

```xml
<Application.Resources>
    <Application.Resources>
        <!-- этот стиль применим ко всем элементам окна -->
        <Style x:Key="DefaultStyle" TargetType="Control">
            <Setter Property="FontFamily" Value="Arial Black" />
        </Style>

        <Style TargetType="Button">
            <Setter Property="Background" Value="#ff9c1a"/>
        </Style>
    </Application.Resources>
</Application.Resources>
```

, где:

* **TargetType** - тип элемента, которому задаем стиль. В нашем случае кнопкам;
* **Property** - свойство, которое меняем
* **Value** - значение

Теперь у всех **Кнопок** в нашем приложении **фон** будет рыжим.

Таким образом мы можем менять любое свойство элементов.

Для того, чтобы стиль *DefaultStyle* подействовал на все элементы окна, его нужно задать окну:

```xml
...
Style="{StaticResource DefaultStyle}"
Title="Услуги авто сервиса" 
MinHeight="100" MinWidth="300"
Height="450" Width="800">
```

Обратите внимание, для кнопки мы задавали только фон, шрифт подтянулся из стилей окна:

![](../img/demo60.png)


Но что, если нужно задать стиль не всем кнопкам, а только некоторым?

Для этого стилю нужно задать аттрибут ``x:Key``:

```xml
<Style TargetType="Button" x:Key="BrownButtonStyle">
...
```

и назначить этот стиль нужным элементам:

```xml
<Button Name="ExitButton" Content="Exit" Click="ExitButton_Click"
                Style="{StaticResource BrownButtonStyle}"/>
```

Обратите внимание, мы указываем не просто название стиля, а выражение в фигурных скобках. Фигурные скобки означают, что внутри не фиксированное значение, а вычисляемое. В нашем случае указание получить статичный ресурс с указанным названием.

### Установка иконки

В контекстном меню **приложения** выбираете *свойства*

![свойства проекта](../img/demo14.png)

В первом же пункте "приложение" через "обзор" находите иконку (она есть в "общих ресурсах"). Студия автоматически скопирует файл иконки в корень проекта, руками его копировать не нужно.

![свойства проекта](../img/demo15.png)

### Добавление логотипа

Для добавления ресурсов в проект можно создать в нем каталог (в контекстном меню проекта выбрать *Добавить* - *Создать папку*) и скопировать в него нужный ресурс, в нашем случае логотип `service_logo.png`.

![](../img/task020.png)

>Обратите внимание, копировать нужно именно в IDE, а не средствами ОС в папку, иначе VS будет искать ресурс не в папке проекта, а в текущей папке VS.

И добавим картинку в сетку:

```xml
    ...
    </StackPanel>

    <Image 
        Margin="5"
        Source="./images/service_logo.png" 
        VerticalAlignment="Top"/>
</Grid>
```

Если сейчас попробовать изменить размер окна, то увидим, что во-первых минимальную высоту надо увеличивать и, во-вторых, логотип нужно размещать в вёрстке до кнопок

![](../img/demo61.png)

Новый вариант верстки:

```xml
    ...
    Title="Услуги авто сервиса" 
    MinHeight="300" MinWidth="300"
    Height="450" Width="800">
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="150"/>
        <ColumnDefinition Width="1*"/>
    </Grid.ColumnDefinitions>

    <Image 
        Margin="5"
        Source="./images/service_logo.png" 
        VerticalAlignment="Top"/>

    <StackPanel 
    ...
```

Теперь кнопки на логотип не наезжают (но кнопок еще добавится в процессе разработки, поэтому вариант не окончательный)

![](../img/demo62.png)
